<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å°ç£å¥½è¡Œé‡‘é–€ Aç·šï½œæ°´é ­ç¿Ÿå±±é›†ç« ä»»å‹™</title>
  <meta name="theme-color" content="#0b0c10" />
  <style>
    :root{font-family:system-ui,-apple-system,"Noto Sans TC",Segoe UI,Roboto,Arial}
    body{margin:0;background:#0b0c10;color:#f5f5f5}
    a{color:inherit}
    .wrap{max-width:820px;margin:0 auto;padding:18px}
    .card{background:#141622;border:1px solid rgba(255,255,255,.09);border-radius:18px;padding:14px;margin:12px 0;box-shadow:0 10px 28px rgba(0,0,0,.28)}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between}
    .pill{display:inline-flex;align-items:center;gap:8px;border:1px solid rgba(255,255,255,.12);padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.03);font-size:12px;opacity:.95}
    h1{font-size:22px;margin:8px 0 0}
    h2{font-size:16px;margin:0}
    .sub{opacity:.85;font-size:13px;line-height:1.65;margin-top:8px}
    .btn{appearance:none;border:1px solid rgba(255,255,255,.12);background:#1d2140;color:#fff;border-radius:14px;padding:10px 12px;font-weight:800;cursor:pointer}
    .btn.secondary{background:#141622}
    .btn.good{background:#1f3d2c}
    .btn.warn{background:#40211d}
    .progress{height:10px;border-radius:999px;background:rgba(255,255,255,.08);overflow:hidden}
    .bar{height:100%;background:#7aa2ff;width:0%}
    input{width:100%;padding:10px 12px;border-radius:12px;border:1px solid rgba(255,255,255,.15);background:#0f1120;color:#fff;font-size:16px}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .grid3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:10px}
    .tiny{font-size:12px;opacity:.85;line-height:1.6}
    .muted{opacity:.75}
    .stop{border:1px solid rgba(255,255,255,.10);border-radius:16px;padding:12px;background:rgba(255,255,255,.03)}
    .stop.done{background:rgba(122,162,255,.12);border-color:rgba(122,162,255,.35)}
    .tag{display:inline-block;margin-right:6px;margin-top:6px;border:1px solid rgba(255,255,255,.12);padding:4px 8px;border-radius:999px;font-size:12px;opacity:.9}
    @media (max-width:700px){.grid2,.grid3{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="row">
        <div>
          <div class="pill">ğŸšŒ å°ç£å¥½è¡Œé‡‘é–€ Aç·šï½œæ°´é ­ç¿Ÿå±±ç·šï¼ˆé›†ç« ä»»å‹™ï¼‰</div>
          <h1>æŠŠã€Œæ­å…¬è»Šã€è®Šæˆä¸€å ´é—–é—œæ—…è¡Œ</h1>
          <div class="sub">
            ç©æ³•ï¼šåˆ°ç«™æƒ QRï¼ˆæˆ–è¼¸å…¥ç«™ç¢¼ï¼‰â†’ çœ‹æ•…äº‹ â†’ ç­”é¡Œé›†ç«  â†’ è§£é– Aç·šå¾½ç«  & å…Œæ›ç¢¼ã€‚<br>
            ç«™é»è³‡æ–™ä¾å®˜æ–¹ Aç·šé€ç«™åœé ï¼ˆå«ï¼šé‡‘åŸè»Šç«™ã€è’å…‰æ¨“ã€æ°´é ­èšè½ã€æ˜éºå¤è¡—ã€æ–‡å°å¯¶å¡”ã€ç¿Ÿå±±å‘é“ç­‰ï¼‰ã€‚</div>
          </div>
        <button class="btn secondary" id="resetBtn" title="æ¸…ç©ºæœ¬æ©Ÿé€²åº¦">é‡ç½®é€²åº¦</button>
      </div>
    </div>

    <div class="card">
      <div class="row">
        <div>
          <div class="pill" id="routePill">ğŸ“ ç›®å‰è·¯ç·šï¼šAç·š</div>
          <div class="sub">ä»»å‹™å»ºè­°ï¼šå…ˆä¸»æ‰“ã€Œé‡é»æ™¯é»ç« ã€ï¼Œå†æ…¢æ…¢åŠ ç«™é»èˆ‡åˆä½œåº—å…Œæ›ã€‚</div>
        </div>
        <div class="pill" id="progressPill">é€²åº¦ï¼š0/6</div>
      </div>
      <div style="margin-top:10px">
        <div class="progress"><div class="bar" id="bar"></div></div>
        <div class="tiny muted" style="margin-top:8px" id="progressHint"></div>
      </div>
    </div>

    <div class="grid2">
      <div class="card" style="margin:0">
        <h2>â‘  æƒ QR / è¼¸å…¥ç«™ç¢¼</h2>
        <div class="tiny muted" style="margin-top:8px">
          ç¯„ä¾‹ï¼šA06ï¼ˆè’å…‰æ¨“ï¼‰ï¼A07ï¼ˆæ°´é ­èšè½ï¼‰ï¼A10ï¼ˆç¿Ÿå±±å‘é“ï¼‰
        </div>
        <div style="margin-top:10px">
          <input id="codeInput" placeholder="è¼¸å…¥ç«™ç¢¼ï¼Œä¾‹å¦‚ A06" />
          <div class="row" style="margin-top:10px;justify-content:flex-start">
            <button class="btn" id="goBtn">å‰å¾€è©²ç«™ä»»å‹™</button>
            <button class="btn secondary" id="nextBtn">è©¦ç©ï¼šå¸¶æˆ‘åˆ°ä¸‹ä¸€ç«™</button>
          </div>
          <div class="tiny muted" style="margin-top:10px">
            QR å»ºè­°é€£çµï¼š<span class="muted">.../index.html?stop=A10</span>ï¼ˆæƒæè‡ªå‹•è·³åˆ°è©²ç«™ä»»å‹™ï¼‰
          </div>
        </div>
      </div>

      <div class="card" style="margin:0">
        <h2>â‘¡ ç«™é»æ•…äº‹ & ä»»å‹™</h2>
        <div id="missionBox" class="tiny muted" style="margin-top:10px">
          å…ˆè¼¸å…¥ç«™ç¢¼ï¼ˆå¦‚ A10ï¼‰æˆ–æŒ‰ã€Œè©¦ç©ã€ã€‚
        </div>
        <div id="missionActions" class="row" style="margin-top:10px;justify-content:flex-start;display:none"></div>
      </div>
    </div>

    <div class="card">
      <h2>â‘¢ Aç·šé‡é»æ™¯é»ç« ï¼ˆè¡ŒéŠ·ä¸»æ‰“ï¼‰</h2>
      <div class="sub">
        æˆ‘å…ˆæŒ‘ 6 å€‹ã€Œæœ€é©åˆåšè¡ŒéŠ·æ•…äº‹ï¼‹åˆ°åº—å…Œæ›å°æµã€çš„é‡é»ç« ï¼ˆä¹‹å¾Œä½ è¦æ“´åˆ°å®Œæ•´é€ç«™éƒ½è¡Œï¼‰ã€‚
      </div>
      <div class="grid3" id="stopsGrid" style="margin-top:12px"></div>
      <div class="tiny muted" style="margin-top:10px">
        ç«™é»åç¨±ä¾ Aç·šå®˜æ–¹é€ç«™åœé ï¼ˆä¾‹å¦‚ï¼šé‡‘åŸè»Šç«™ã€è’å…‰æ¨“ã€æ°´é ­èšè½ã€æ˜éºå¤è¡—ã€æ–‡å°å¯¶å¡”ã€ç¿Ÿå±±å‘é“ç­‰ï¼‰ã€‚</div>
    </div>

    <div class="card" id="finish" style="display:none">
      <div class="pill">ğŸ‰ å®Œæˆ Aç·šå¾½ç« </div>
      <h2 style="margin-top:8px">ä½ è§£é–äº†ã€ŒAç·šå¥½è¡Œå¾½ç« ã€ï¼</h2>
      <div class="sub" id="rewardText"></div>
      <div class="row" style="margin-top:12px;justify-content:flex-start">
        <button class="btn good" id="shareBtn">ä¸€éµåˆ†äº«</button>
        <button class="btn secondary" id="couponBtn">é¡¯ç¤ºå…Œæ›ç¢¼</button>
      </div>
      <div class="tiny" style="margin-top:10px" id="couponHint"></div>
      <div class="tiny muted" style="margin-top:10px">
        æ­£å¼ç‰ˆå»ºè­°ï¼šå…Œæ›ç¢¼æ”¹æˆã€Œå¾Œç«¯ç°½ç« /é™æ¬¡æ ¸éŠ·ã€ï¼Œé¿å…æˆªåœ–æ¿«ç”¨ã€‚
      </div>
    </div>

    <div class="card">
      <div class="tiny">
        âœ… ç¾åœ°ä½ˆç½²å»ºè­°ï¼šæŠŠ QR æ”¾åœ¨ã€Œè»Šä¸Šåº§æ¤…èƒŒã€ç«™ç‰Œã€æ—…æœä¸­å¿ƒã€åˆä½œåº—å®¶ã€ã€‚å®Œæˆå¾½ç« å¯åˆ°åˆä½œåº—å‡ºç¤ºç•«é¢æ›å°ç¦®/æŠ˜æ‰£ã€‚<br>
        âœ… ä¸‹ä¸€ç‰ˆæˆ‘å¯ä»¥å¹«ä½ åŠ ï¼šæ’è¡Œæ¦œã€æŠ½çç¢¼æ ¸éŠ·ã€å°è³¼ï¼ˆåŠæ—¥/ä¸€æ—¥/äºŒæ—¥åˆ¸ï¼‰ã€å¤šèªç³»ï¼ˆä¸­/è‹±/æ—¥ï¼‰ã€‚å°ç£å¥½è¡Œé‡‘é–€ä¹Ÿæœ‰å¥—ç¥¨/ç¥¨åˆ¸è³‡è¨Šé å¯åšå°è³¼å…¥å£ã€‚</div>
    </div>
  </div>

<script>
/** ===== Aç·šç«™é»è³‡æ–™ï¼ˆé‡é»ç« ï¼‰ =====
 * ç«™åä¾å°ç£å¥½è¡Œ Aç·šé€ç«™åœé é é¢é¡¯ç¤ºï¼ˆä¾‹å¦‚ï¼šé‡‘åŸè»Šç«™ã€è’å…‰æ¨“ã€æ°´é ­èšè½ã€æ˜éºå¤è¡—ã€æ–‡å°å¯¶å¡”ã€ç¿Ÿå±±å‘é“ç­‰ï¼‰ã€‚
 * ä¾†æºï¼šå°ç£å¥½è¡Œé‡‘é–€ Aç·šæ™‚åˆ»è¡¨/å…¬è»Šå‹•æ…‹ã€‚ */
const ROUTE_SOURCE_NOTE = "Aç·šé€ç«™åœé ï¼šé‡‘åŸè»Šç«™ã€é‡‘åŸè¡›ç”Ÿæ‰€ã€è¥¿é–€é‡Œå…¬æ‰€ã€é«”è‚²é¤¨ã€è’å…‰æ¨“ã€ç©ºä¸­å¤§å­¸ã€æ°´é ­èšè½ã€æ˜éºå¤è¡—ã€æ–‡å°å¯¶å¡”ã€ç¿Ÿå±±å‘é“ã€ç å±±ã€å›é‡‘åŸè»Šç«™ã€‚";

const A_STOPS = [
  { id:"A01", name:"é‡‘åŸè»Šç«™", tags:["èµ·é»","äº¤é€šæ¨ç´"], story:"å¾é‡‘åŸå‡ºç™¼ï¼ŒåŠå¤©æŠŠè¥¿åŠéƒ¨ç²¾è¯æ”¶é€²å›æ†¶è£¡ã€‚ä»Šå¤©ä½ ä¸æ˜¯è¶•è¡Œç¨‹ï¼Œæ˜¯åœ¨ã€é›†ç« é—–é—œã€ã€‚", q:[
    {t:"ç‚ºä»€éº¼ç”¨å…¬è»Šé›†ç« å¾ˆé©åˆåšè¡ŒéŠ·ï¼Ÿ", a:["å› ç‚ºæ›´éº»ç…©","å› ç‚ºèƒ½å¼•å°åˆ°ç«™äº’å‹•èˆ‡å°æµ","å› ç‚ºæ¯”è¼ƒæ…¢"], c:1},
  ]},
  { id:"A06", name:"è’å…‰æ¨“", tags:["åœ°æ¨™","é çœºé‡‘å»ˆ"], story:"è’å…‰æ¨“æ˜¯é‡‘é–€çš„ä»£è¡¨æ€§åœ°æ¨™ä¹‹ä¸€ï¼Œç«™ä¸Šå»è¦–é‡æ‰“é–‹ï¼šæŠŠã€çœ‹è¦‹ã€è®Šæˆã€æƒ³åˆ†äº«ã€ã€‚", q:[
    {t:"åˆ°åœ°æ¨™é»æœ€é©åˆåšå“ªç¨®ä»»å‹™ï¼Ÿ", a:["çœ‹å®Œå°±èµ°","æ‹ç…§ï¼‹ä¸€å¥è©±åˆ†äº«","ä»€éº¼éƒ½ä¸åš"], c:1},
  ]},
  { id:"A07", name:"æ°´é ­èšè½", tags:["èšè½","æ´‹æ¨“"], story:"æ°´é ­èšè½çš„æ´‹æ¨“èˆ‡èšè½æ°›åœï¼Œæ˜¯ã€èµ°é€²æ­·å²ã€æœ€ç›´è¦ºçš„å…¥å£ï¼šæ…¢ä¸€é»ï¼Œä½ æœƒçœ‹è¦‹ç´°ç¯€ã€‚", q:[
    {t:"èšè½å‹æ™¯é»æœ€é©åˆçš„ç©æ³•æ˜¯ï¼Ÿ", a:["è¡åˆºå¼æ‰“å¡","æ…¢èµ°è§€å¯Ÿï¼‹è§£é–æ•…äº‹","åªåœ¨é–€å£æ‹ç…§"], c:1},
  ]},
  { id:"A08", name:"æ˜éºå¤è¡—", tags:["è€è¡—","æ‡·èˆŠ"], story:"è€è¡—çš„å¥½ï¼Œä¸åœ¨æ–¼ã€è²·åˆ°ä»€éº¼ã€ï¼Œè€Œåœ¨æ–¼ã€ä½ æ€éº¼èµ°ã€ã€‚æŠŠèµ°è·¯è®Šæˆè§£è¬ï¼Œé«”é©—æ„Ÿæœƒç¬é–“æ‹‰æ»¿ã€‚", q:[
    {t:"è€è¡—é—œå¡æœ€é©åˆçµåˆä»€éº¼ï¼Ÿ", a:["å°‹å¯¶ç·šç´¢","å¢åŠ ç­‰å¾…","ç¦æ­¢æ‹ç…§"], c:0},
  ]},
  { id:"A09", name:"æ–‡å°å¯¶å¡”", tags:["é¢¨æ™¯é»","æ‰“å¡"], story:"æ–‡å°å¯¶å¡”å¸¸è¢«ç•¶ä½œé¢¨æ™¯åœç•™é»ã€‚è¡ŒéŠ·ä¸Šï¼Œé€™ç¨®é»æœ€é©åˆï¼šä¸€å¥æ¨™èªï¼‹ä¸€å¼µç…§ç‰‡ï¼ä¸€å‰‡åˆ†äº«ã€‚", q:[
    {t:"è¡ŒéŠ·åˆ†äº«çš„ã€æœ€å°å–®ä½ã€é€šå¸¸æ˜¯ï¼Ÿ", a:["é•·ç¯‡å ±å‘Š","ä¸€å¥è©±ï¼‹ä¸€å¼µç…§ç‰‡","å®Œå…¨ä¸èªª"], c:1},
  ]},
  { id:"A10", name:"ç¿Ÿå±±å‘é“", tags:["è»äº‹åœ°æ™¯","å¤å­£æ¸…æ¶¼"], story:"ç¿Ÿå±±å‘é“æ˜¯é‡‘é–€è»äº‹åœ°æ™¯çš„ç¶“å…¸ä»£è¡¨ï¼Œå‘é“å…§éƒ¨é«”æ„Ÿæ¸…æ¶¼ã€æ°›åœå¼·ã€‚æŠŠã€åˆ°æ­¤ä¸€éŠã€å‡ç´šæˆã€å®Œæˆä»»å‹™ã€ï¼Œæ›´å®¹æ˜“ç•™ä¸‹è¨˜æ†¶ã€‚", q:[
    {t:"å‘é“é¡æ™¯é»æœ€èƒ½å¼·åŒ–å“ªç¨®é«”é©—ï¼Ÿ", a:["æ²‰æµ¸æ„Ÿ","ç„¡èŠæ„Ÿ","çœ‹ä¸åˆ°"], c:0},
  ]},
];

// é›†æ»¿å¹¾æšç« ç®—å®Œæˆï¼ˆè¡ŒéŠ· MVPï¼‰
const NEED = A_STOPS.length;

// å„²å­˜ keyï¼ˆä¸åŒç‰ˆæœ¬å¯æ”¹ v2/v3ï¼‰
const KEY = "km_tour_A_marketing_v1";
const state = JSON.parse(localStorage.getItem(KEY) || "{}");
function save(){ localStorage.setItem(KEY, JSON.stringify(state)); }
function $(s){ return document.querySelector(s); }

function normStop(s){
  return (s||"").trim().toUpperCase().replace(/[^A-Z0-9]/g,"");
}

function render(){
  state.stamps ||= [];
  const got = state.stamps.length;

  $("#progressPill").textContent = `é€²åº¦ï¼š${got}/${NEED}`;
  $("#bar").style.width = `${Math.min(100, (got/NEED)*100)}%`;
  $("#progressHint").textContent = `æç¤ºï¼š${ROUTE_SOURCE_NOTE}`;

  // stops grid
  const grid = $("#stopsGrid");
  grid.innerHTML = "";
  A_STOPS.forEach(st=>{
    const done = state.stamps.includes(st.id);
    const div = document.createElement("div");
    div.className = "stop" + (done ? " done" : "");
    div.innerHTML = `
      <div style="font-weight:900;font-size:14px">${done ? "âœ… " : "â¬œ "}${st.name}</div>
      <div class="tiny muted">ç«™ç¢¼ï¼š${st.id}</div>
      <div style="margin-top:6px">${st.tags.map(x=>`<span class="tag">${x}</span>`).join("")}</div>
      <div class="tiny" style="margin-top:8px;opacity:.9">${st.story}</div>
      <div class="row" style="margin-top:10px;justify-content:flex-start">
        <button class="btn secondary" data-stop="${st.id}">å‰å¾€ä»»å‹™</button>
        <button class="btn secondary" data-link="${encodeURIComponent(st.name + " é‡‘é–€")}">åœ°åœ–æœå°‹</button>
      </div>
    `;
    grid.appendChild(div);
  });

  // bind buttons inside grid
  grid.querySelectorAll("button[data-stop]").forEach(b=>{
    b.onclick = ()=>gotoStop(b.getAttribute("data-stop"));
  });
  grid.querySelectorAll("button[data-link]").forEach(b=>{
    b.onclick = ()=>{
      const q = decodeURIComponent(b.getAttribute("data-link"));
      window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(q)}`, "_blank");
    };
  });

  if(got >= NEED){
    $("#finish").style.display = "";
    $("#rewardText").textContent = "ä½ å®Œæˆäº† Aç·šé‡é»é›†ç« ï¼å»ºè­°æŠŠæ­¤ç•«é¢ä½œç‚ºã€åˆ°åº—å…Œæ›ã€å…¥å£ï¼ˆå°ç¦®/æŠ˜æ‰£/æŠ½çï¼‰ã€‚";
  }else{
    $("#finish").style.display = "none";
  }
}

function gotoStop(stopId){
  const st = A_STOPS.find(x=>x.id===stopId);
  const box = $("#missionBox");
  const act = $("#missionActions");
  act.style.display = "none";

  if(!st){
    box.className = "tiny muted";
    box.textContent = "æ‰¾ä¸åˆ°è©²ç«™ã€‚è«‹è¼¸å…¥å¦‚ A10 çš„ç«™ç¢¼ã€‚";
    return;
  }

  const already = (state.stamps||[]).includes(st.id);
  if(already){
    box.className = "tiny muted";
    box.innerHTML = `ä½ å·²ç¶“æ‹¿é <b>${st.name}</b> çš„ç« ï¼ˆ${st.id}ï¼‰äº†ï¼æ›ä¸‹ä¸€ç«™å§ï½`;
    return;
  }

  // pick a question for this stop
  const q = st.q[Math.floor(Math.random()*st.q.length)];
  box.className = "tiny";
  box.innerHTML = `
    <div class="pill">ğŸ“ ${st.name}ï¼ˆ${st.id}ï¼‰</div>
    <div style="margin-top:10px;opacity:.92">${st.story}</div>
    <div style="margin-top:10px;font-weight:900">ä»»å‹™ï¼šç­”å°æ‰å¯é›†ç« </div>
    <div style="margin-top:8px">${q.t}</div>
  `;

  act.innerHTML = "";
  q.a.forEach((opt, idx)=>{
    const b = document.createElement("button");
    b.className = "btn secondary";
    b.textContent = `${idx+1}. ${opt}`;
    b.onclick = ()=>{
      if(idx === q.c){
        state.stamps ||= [];
        state.stamps.push(st.id);
        save();
        box.innerHTML = `âœ… æ­å–œï¼ä½ ç²å¾—ã€Œ${st.name}ã€ç« ï¼ˆ<b>${st.id}</b>ï¼‰ã€‚<div class="tiny muted" style="margin-top:6px">å¯æŒ‰å³ä¸Šæ–¹é€²åº¦æŸ¥çœ‹å®Œæˆç‹€æ…‹ï¼Œæˆ–å»ä¸‹ä¸€ç«™ã€‚</div>`;
        act.style.display = "none";
        render();
      }else{
        box.innerHTML = `å†è©¦ä¸€æ¬¡ï½æç¤ºï¼šç­”æ¡ˆè·Ÿã€äº’å‹•å°æµ/æ²‰æµ¸/åˆ†äº«ã€æœ‰é—œã€‚`;
      }
    };
    act.appendChild(b);
  });
  act.style.display = "flex";

  // also sync input
  $("#codeInput").value = st.id;
}

function nextUncollected(){
  state.stamps ||= [];
  return A_STOPS.find(x=>!state.stamps.includes(x.id))?.id || A_STOPS[0].id;
}

function showCoupon(){
  const device = (state.deviceId ||= Math.random().toString(16).slice(2,10)).toUpperCase();
  save();
  const coupon = `KM-A-${device}`;
  $("#couponHint").textContent = `ç¤ºç¯„å…Œæ›ç¢¼ï¼š${coupon}ï¼ˆæ­£å¼ç‰ˆå»ºè­°å¾Œç«¯æ ¸éŠ·ï¼‰`;
}

$("#goBtn").onclick = ()=>gotoStop(normStop($("#codeInput").value));
$("#nextBtn").onclick = ()=>gotoStop(nextUncollected());
$("#resetBtn").onclick = ()=>{ localStorage.removeItem(KEY); location.href = location.pathname + "?v=" + Date.now(); };

$("#shareBtn").onclick = async ()=>{
  const text = "æˆ‘å‰›å®Œæˆå°ç£å¥½è¡Œé‡‘é–€ Aç·šã€æ°´é ­ç¿Ÿå±±é›†ç« ä»»å‹™ã€ğŸšŒâœ¨ #å°ç£å¥½è¡Œ #é‡‘é–€ #Aç·š";
  try{
    if(navigator.share) await navigator.share({title:"å°ç£å¥½è¡Œé‡‘é–€ Aç·š", text});
    else { await navigator.clipboard.writeText(text); alert("å·²è¤‡è£½åˆ†äº«æ–‡æ¡ˆåˆ°å‰ªè²¼ç°¿ï¼"); }
  }catch(e){ alert("åˆ†äº«å–æ¶ˆæˆ–ä¸å¯ç”¨ã€‚"); }
};
$("#couponBtn").onclick = showCoupon;

// boot: support ?stop=A10
(function boot(){
  render();
  const url = new URL(location.href);
  const stop = url.searchParams.get("stop");
  if(stop){
    gotoStop(normStop(stop));
  }
})();
</script>
</body>
</html>
